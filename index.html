<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Tech Premium</title>
    <style>
        :root { 
            --primary-green: #4CAF50; 
            --accent-purple: #a435f0; 
            --glow-color: rgba(164, 53, 240, 0.4);
            --bg-color: #ffffff; 
        }

        body { 
            margin: 0; height: 100vh; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; 
            background-color: var(--bg-color); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            overflow: hidden; 
        }

        /* เอฟเฟกต์ระเบิดสีม่วง (พื้นหลังที่ซ่อนอยู่) */
        .purple-overlay {
            position: fixed; top: 50%; left: 50%;
            width: 10px; height: 10px;
            background: radial-gradient(circle, var(--accent-purple) 0%, #6a1b9a 100%);
            border-radius: 50%; transform: translate(-50%, -50%) scale(0);
            z-index: 1; pointer-events: none;
        }

        .active-burst {
            animation: burst-to-fill 1.2s cubic-bezier(0.19, 1, 0.22, 1) forwards;
        }

        @keyframes burst-to-fill {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(500); }
        }

        .container { 
            text-align: center; display: flex; flex-direction: column; 
            align-items: center; position: relative; z-index: 10;
        }

        /* โซนโลโก้ (เพิ่มความพรีเมียมด้วยเส้นขอบเรืองแสงวิ่งรอบ) */
        .logo-wrapper { 
            width: 140px; height: 140px; margin-bottom: 30px; 
            position: relative; border-radius: 50%; 
            padding: 5px; /* พื้นที่ให้เส้นขอบวิ่ง */
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
            background: #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.5s ease;
        }

        /* เส้นเรืองแสงหมุนรอบโลโก้ */
        .logo-wrapper::before {
            content: '';
            position: absolute;
            width: 150%; height: 150%;
            background: conic-gradient(transparent, transparent, var(--accent-purple), transparent);
            animation: rotate-border 3s linear infinite;
        }

        @keyframes rotate-border {
            100% { transform: rotate(360deg); }
        }

        .logo-img { 
            width: 100%; height: 100%; object-fit: cover; 
            border-radius: 50%; z-index: 2; background: white;
        }

        /* อนิเมชั่นหมุนและย่อขยายตอนจะระเบิด */
        .logo-active-anim { 
            animation: premiumSpin 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; 
        }

        @keyframes premiumSpin { 
            0% { transform: scale(1) rotate(0deg); } 
            30% { transform: scale(0.85) rotate(-15deg); } 
            100% { transform: scale(1.1) rotate(360deg); box-shadow: 0 0 40px var(--glow-color); } 
        }

        .white-text { color: white !important; transition: all 0.5s; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }

        .loader { 
            width: 30px; height: 30px; 
            border: 3px solid #f3f3f3; border-top: 3px solid var(--primary-green); 
            border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px; 
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        h1 { font-size: 22px; font-weight: 800; color: #333; margin: 0; z-index: 12; letter-spacing: 1px; }
        .status-text { font-size: 15px; color: #888; margin-top: 10px; z-index: 12; transition: all 0.4s; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="burstOverlay" class="purple-overlay"></div>

    <div class="container">
        <div class="logo-wrapper" id="logoWrapper">
            <img src="STP.png" alt="Logo" class="logo-img">
        </div>
        <div id="loader" class="loader"></div>
        <h1 id="mainTitle">Smart Tech Premium</h1>
        <p id="status" class="status-text">กำลังตรวจสอบข้อมูล</p>
    </div>

    <script>
        const logoWrapper = document.getElementById('logoWrapper');
        const loader = document.getElementById('loader');
        const statusText = document.getElementById('status');
        const mainTitle = document.getElementById('mainTitle');
        const burstOverlay = document.getElementById('burstOverlay');

        // ส่วนเชื่อมต่อ Google Sheets
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwiUqpR7callxaydSRZR6c_iCEdQiATncDug8As3It0tl6nmltSCd2RfrV1p4dErZSnHQ/exec";
        const urlParams = new URLSearchParams(window.location.search);
        const locName = urlParams.get('loc') || "จุดแตะทั่วไป";

        // 1. ส่งข้อมูลทันที (Autoplay ในตัว)
        fetch(`${SCRIPT_URL}?loc=${encodeURIComponent(locName)}`, { mode: 'no-cors', keepalive: true });

        // 2. ลำดับเหตุการณ์อัตโนมัติตามเวลา
        setTimeout(() => {
            // จังหวะเริ่มเตรียมระเบิด
            loader.classList.add('hidden');
            burstOverlay.classList.add('active-burst');
            logoWrapper.classList.add('logo-active-anim');

            // เปลี่ยนสีข้อความตามพื้นหลังม่วง
            statusText.classList.add('white-text');
            mainTitle.classList.add('white-text');
            
            statusText.innerText = "กำลังย้ายท่านไปยังเพจ";
            statusText.style.fontWeight = "bold";
        }, 2000); // รอโหลด 2 วินาที

        // 3. เปลี่ยนหน้าอัตโนมัติ
        setTimeout(() => {
            window.location.replace("https://m.facebook.com/sswsmarttech/");
        }, 4000); // รวมเวลาทั้งหมด 4 วินาที
    </script>
</body>
</html>